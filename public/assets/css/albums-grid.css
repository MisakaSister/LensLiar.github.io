/* 相册网格布局样式 - 基于 simple-grid-with-reveal-resize-on-hover */

:root {
	/* 颜色调色板 */
	--deep-seaweed--l: 16%;
	--deep-seaweed--c: 0.045;
	--deep-seaweed--h: 120;
	--deep-seaweed: var(--deep-seaweed--l) var(--deep-seaweed--c) var(--deep-seaweed--h);
	
	--darker-seaweed--l: 24%;
	--darker-seaweed--c: 0.03;
	--darker-seaweed--h: 120;
	--darker-seaweed: var(--darker-seaweed--l) var(--darker-seaweed--c) var(--darker-seaweed--h);
	
	--oatmeal--l: 81%;
	--oatmeal--c: 0.045;
	--oatmeal--h: 70;
	--oatmeal: var(--oatmeal--l) var(--oatmeal--c) var(--oatmeal--h);
	
	/* 调色板设置 */
	--primary--darkest: var(--deep-seaweed);
	--primary--darker: var(--darker-seaweed);	
	--secondary: var(--oatmeal);
	
	/* 字体设置 */
	--mono: "IBM Plex Mono", monospace;
	--sans: "IBM Plex Sans", sans-serif;
	
	/* 内容设置 */
	--container--block-padding: 3.25rem;
	--container--inline-padding: min(360px, 4dvw);
	
	/* 网格设置 */
	--grid-column-count: 4;
	--grid-gap: 12px;
	--grid-gap-count: calc(var(--grid-column-count) - 1);
	--total-gap-width: calc(var(--grid-gap-count) * var(--grid-gap));
	
	--grid-item--min-width--constraint: 300px;
	--grid-item--max-width--constraint: 480px;
	--grid-item--min-width: min(100%, var(--grid-item--min-width--constraint));
	--grid-item--max-width: calc((100% - var(--total-gap-width)) / var(--grid-column-count));
	
	--grid-item--bg: oklch(var(--primary--darker));
	--grid-item--color: oklch(var(--secondary));
}

/* 基础重置 */
*, *:before, *:after {
	box-sizing: border-box;
	line-height: 1cap;
}

/* 页面背景 */
html {
	background: linear-gradient(
		in oklch 150deg,
		color-mix(in oklch, oklch(var(--primary--darker)), black 24%),
		color-mix(in oklch, oklch(var(--primary--darker)), black 64%)
	);
	font-family: var(--sans);
	padding: var(--container--block-padding) var(--container--inline-padding);
	overflow-x: hidden;
}

/* 链接样式 */
a:any-link {
	color: inherit;
}

a.button,
a.tag {
	text-decoration: none;
	transition-property: background, color;
}

/* 标签容器 */
.tags--overflow-container {	
	padding-inline: calc(var(--content-padding) + 4px);
	position: relative;
}

.tags--overflow-container:after {
	background: linear-gradient(
		90deg, 
		var(--grid-item--bg) var(--content-padding), 
		transparent calc(var(--content-padding) + 10px),
		transparent calc(100% - calc(var(--content-padding) + 10px)), 
		var(--grid-item--bg) calc(100% - var(--content-padding))
	);
	pointer-events: none;
	content: "";
	inset: 0;
	position: absolute;
	z-index: 6;
}

.tags--container {
	container: tags-container / inline-size;
	display: flex;
	flex-wrap: wrap;
	gap: 4px;
	list-style: none;
	margin: 0;
	padding: 0;
	position: relative;
}

.tags--overflow-container .tags--container {
	transform: translateX(0);
	will-change: transform;
}

/* 标签样式 */
a.tag,
.tag {
	border: .05rem solid color-mix(in oklab, currentColor, transparent 80%);
	border-radius: 100px;
	display: flex;
	align-items: center;
	font-size: 13px;
	font-weight: 500;
	user-select: none;
	padding-inline: 14px;
	padding-bottom: 1px;
	transition-property: background, border, transform;
	transition-duration: .15s, .15s, 6s;
	height: 32px;
	text-overflow: ellipsis;
	overflow: hidden;
	white-space: nowrap;
}

a.tag:not(.post-type):hover,
.tag:not(.post-type):hover {
	border-color: transparent;
	background: color-mix(in oklab, currentColor, transparent 80%);
}

@media screen and (min-width: 600px) {
	a.tag,
	.tag {
		flex-wrap: nowrap;
		overflow: hidden;
	}
}

/* 网格容器 */
.grid--container {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(max(var(--grid-item--min-width), var(--grid-item--max-width)), 1fr));
	grid-auto-rows: minmax(420px, auto);
	grid-auto-flow: dense;
	gap: var(--grid-gap);
	margin: 0 auto;
	max-width: 1920px;
}

/* 网格单元格 */
.grid--cell {	
	position: relative; 
}

/* 网格项目 */
.grid--item {	
	--preview--h: 325px;
	--content-gap: 1lh;
	--content-padding: 12px;
	--options--h: 42px;
	--hover--h: calc(var(--content-gap) + var(--options--h));
	--hover-offset: calc((var(--hover--h) / 2) * -1);
	--shadow-blur: 36px;
	--shadow-transparency: 60%;
	
	border-radius: 18px;
	color: var(--grid-item--color);
	background: var(--grid-item--bg);
	box-shadow: 
		0 0 var(--shadow-blur) color-mix(in oklch, black, transparent var(--shadow-transparency)),
		0 0 0 1px color-mix(in oklch, currentColor, transparent 90%);
	
	display: grid;
	grid-template-rows: var(--preview--h) 1fr;
	overflow: hidden;
	position: relative;
	transition: all 0.3s ease;
}

.grid--item:before {
	background: linear-gradient(
		to bottom,
		transparent 0%,
		color-mix(in oklch, currentColor, transparent 95%) 100%
	);
	content: "";
	inset: 0;
	opacity: 0;
	position: absolute;
	transition: opacity 0.3s ease;
	z-index: 1;
}

/* 预览容器 */
.preview--container {
	position: relative;
	overflow: hidden;
}

.preview--container .hover--options {
	display: none;
}

.grid--item:hover .preview--container .hover--options,
.grid--item:focus-within .preview--container .hover--options {
	display: flex;
}

.preview-image--container {
	display: block;
	height: 100%;
	position: relative;
	text-decoration: none;
}

.preview-image {
	background-attachment: scroll;
	background-color: color-mix(in oklch, currentColor, transparent 95%);
	background-position: center;
	background-repeat: no-repeat;
	background-size: cover;
	height: 100%;
	transition: all 0.3s ease;
	width: 100%;
}

/* 元数据容器 */
.meta--container {
	bottom: var(--content-padding);
	display: flex;
	gap: 8px;
	left: var(--content-padding);
	position: absolute;
	z-index: 2;
}

.meta--container .issue,
.meta--container .page {
	color: color-mix(in oklch, currentColor, transparent 20%);
	font-size: 12px;
	font-weight: 500;
	text-decoration: none;
	transition: color 0.3s ease;
}

.meta--container .issue:hover,
.meta--container .page:hover {
	text-decoration: underline;
}

.meta--container .issue {
	background: color-mix(in oklch, currentColor, transparent 90%);
	border-radius: 100px;
	padding: 4px 8px;
}

.meta--container .page {
	background: color-mix(in oklch, currentColor, transparent 90%);
	border-radius: 100px;
	padding: 4px 8px;
}

/* 内容容器 */
.content--container {
	display: flex;
	flex-direction: column;
	gap: var(--content-gap);
	padding: var(--content-padding);
	position: relative;
}

.content--container .title--container,
.content--container .tags--overflow-container {
	position: relative;
	z-index: 2;
}

.title--container {
	display: flex;
	flex-direction: column;
	gap: 4px;
}

.title--container a.title--text {
	color: inherit;
	font-size: 18px;
	font-weight: 600;
	line-height: 1.3;
	text-decoration: none;
	transition: color 0.3s ease;
	display: -webkit-box;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

.title--container a.title--text:hover {
	color: color-mix(in oklch, currentColor, transparent 20%);
}

@media screen and (min-width: 320px) { 
	.title--container { 
		gap: 6px;
	}
	
	a.title--text { 
		-webkit-line-clamp: 2; 
	}
}

@media screen and (min-width: 600px) {
	.title--container { 
		gap: 8px;
	}
	
	a.title--text { 
		-webkit-line-clamp: 1; 
	}
}

.tags--overflow-container {
	margin-top: auto;
}

/* 悬停选项 */
.hover--options {
	display: none;
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	z-index: 10;
	gap: 15px;
	align-items: center;
	justify-content: center;
}

.hover--options .button {
	align-items: center;
	background: color-mix(in oklch, currentColor, transparent 90%);
	border-radius: 50%;
	color: inherit;
	display: flex;
	font-size: 16px;
	font-weight: 500;
	justify-content: center;
	padding: 12px;
	text-decoration: none;
	transition: all 0.3s ease;
	width: 48px;
	height: 48px;
	backdrop-filter: blur(10px);
	border: 1px solid color-mix(in oklch, currentColor, transparent 80%);
}

.hover--options .button:hover {
	background: color-mix(in oklch, currentColor, transparent 80%);
	transform: scale(1.1);
	box-shadow: 0 4px 12px color-mix(in oklch, black, transparent 60%);
}

.hover--options .series,
.hover--options .latest {
	align-items: center;
	display: flex;
	justify-content: center;
}

.hover--options .series .icon-title,
.hover--options .latest .icon-title { 
	display: none;
}

.hover--options .series [data-icon="books"],
.hover--options .latest [data-icon="image"] {
	font-size: 18px;
}

.hover--options .series .new-tab,
.hover--options .latest .new-tab {
	display: none;
}

.hover--options .series {
	background: color-mix(in oklch, #4ecdc4, transparent 90%);
}

.hover--options .series:hover {
	background: color-mix(in oklch, #4ecdc4, transparent 80%);
}

.hover--options .latest {
	background: color-mix(in oklch, #667eea, transparent 90%);
}

.hover--options .latest:hover {
	background: color-mix(in oklch, #667eea, transparent 80%);
}

.hover--options .follow {
	background: color-mix(in oklch, #ff6b6b, transparent 90%);
}

.hover--options .follow:hover {
	background: color-mix(in oklch, #ff6b6b, transparent 80%);
}

/* 非特色项目 */
.grid--item:not(.featured) .preview--container {
	background: color-mix(in oklch, currentColor, transparent 95%);
}

/* 特色项目 */
.grid--item.featured {
	grid-column: span 2;
	grid-row: span 2;
}

.grid--item.featured .post-type {
	background: color-mix(in oklch, #ff6b6b, transparent 90%);
	color: #ff6b6b;
}

.grid--item.featured .preview--container {
	background: color-mix(in oklch, currentColor, transparent 98%);
}

.grid--item.featured .tags--container {
	flex-wrap: wrap;
}

.grid--item.featured .content--container { 
	padding-bottom: calc(var(--content-padding) + 4px); 
}

.grid--item.featured .intro--container,
.grid--item.featured .tags--overflow-container {
	margin-top: auto;
}

@media screen and (min-width: 652px) {
	.grid--item.featured {
		grid-column: span 2;
		grid-row: span 2;
	}
	
	.grid--item.featured .preview--container {
		background: color-mix(in oklch, currentColor, transparent 98%);
	}
}

/* 悬停效果 */
.grid--item:hover, 
.grid--item:focus-within {
	transform: translateY(-4px) scale(1.02);
	box-shadow: 
		0 8px var(--shadow-blur) color-mix(in oklch, black, transparent calc(var(--shadow-transparency) - 20%)),
		0 0 0 1px color-mix(in oklch, currentColor, transparent 80%);
}

.grid--item:hover:before,
.grid--item:focus-within:before {
	opacity: 1;
}

.grid--item:hover .preview--container,
.grid--item:focus-within .preview--container { 
	background: oklch(var(--primary--darkest)); 
}

.grid--item:hover .preview-image,
.grid--item:focus-within .preview-image {
	transform: scale(1.05);
}

/* 响应式设计 */
@media screen and (min-width: 600px) {
	.grid--item {
		--preview--h: 280px;
	}
}

/* 网格项目最小宽度调整 */
:root {
	@media screen and (min-width: 800px) { 
		--grid-item--min-width--constraint: 360px; 
	}
}

@media screen and (min-width: 600px) {
	.grid--item {
		&:hover {
			.tags--container {
				transform: translateX(calc(-100% + 200px));
			}
			
			.tags--container:hover {
				transform: translateX(0);
			}
		}
	}
}

/* 标签滚动动画 */
@keyframes marquee {
	0% {
		transform: translateX(0);
	}
	100% {
		transform: translateX(-100%);
	}
}

/* 适配我们的项目样式 */
.container {
	max-width: 1400px;
	margin: 0 auto;
	padding: 20px;
}

.content-sections {
	margin-bottom: 40px;
}

.page-header {
	text-align: center;
	margin-bottom: 40px;
}

.page-main-title {
	font-size: 2.5rem;
	font-weight: 700;
	color: var(--grid-item--color);
	margin: 0 0 15px 0;
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 15px;
}

.page-subtitle {
	font-size: 1.1rem;
	color: color-mix(in oklch, var(--grid-item--color), transparent 30%);
	margin: 0;
}

.content-controls {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 30px;
	flex-wrap: wrap;
	gap: 20px;
}

.controls-left,
.controls-right {
	display: flex;
	gap: 15px;
	align-items: center;
}

.search-container {
	position: relative;
	min-width: 250px;
}

.search-container i {
	position: absolute;
	left: 15px;
	top: 50%;
	transform: translateY(-50%);
	color: color-mix(in oklch, var(--grid-item--color), transparent 30%);
	z-index: 1;
}

.search-input {
	width: 100%;
	padding: 12px 15px 12px 45px;
	border: 2px solid color-mix(in oklch, var(--grid-item--color), transparent 80%);
	border-radius: 12px;
	font-size: 0.95rem;
	background: var(--grid-item--bg);
	color: var(--grid-item--color);
	transition: all 0.3s ease;
}

.search-input:focus {
	outline: none;
	border-color: color-mix(in oklch, var(--grid-item--color), transparent 50%);
	box-shadow: 0 0 0 3px color-mix(in oklch, var(--grid-item--color), transparent 90%);
}

.filter-select,
.sort-select {
	padding: 12px 15px;
	border: 2px solid color-mix(in oklch, var(--grid-item--color), transparent 80%);
	border-radius: 12px;
	font-size: 0.95rem;
	background: var(--grid-item--bg);
	color: var(--grid-item--color);
	cursor: pointer;
	transition: all 0.3s ease;
	min-width: 140px;
}

.filter-select:focus,
.sort-select:focus {
	outline: none;
	border-color: color-mix(in oklch, var(--grid-item--color), transparent 50%);
	box-shadow: 0 0 0 3px color-mix(in oklch, var(--grid-item--color), transparent 90%);
}

.load-more-section {
	text-align: center;
	margin-top: 40px;
}

.btn-load-more {
	background: color-mix(in oklch, var(--grid-item--color), transparent 90%);
	color: var(--grid-item--color);
	border: 2px solid color-mix(in oklch, var(--grid-item--color), transparent 80%);
	border-radius: 12px;
	padding: 12px 24px;
	font-size: 1rem;
	font-weight: 600;
	cursor: pointer;
	transition: all 0.3s ease;
	display: inline-flex;
	align-items: center;
	gap: 8px;
}

.btn-load-more:hover {
	background: color-mix(in oklch, var(--grid-item--color), transparent 80%);
	transform: translateY(-2px);
}

/* 加载状态 */
.loading {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	padding: 60px 20px;
	color: color-mix(in oklch, var(--grid-item--color), transparent 30%);
}

.spinner {
	width: 40px;
	height: 40px;
	border: 3px solid color-mix(in oklch, var(--grid-item--color), transparent 80%);
	border-top: 3px solid var(--grid-item--color);
	border-radius: 50%;
	animation: spin 1s linear infinite;
	margin-bottom: 15px;
}

@keyframes spin {
	0% { transform: rotate(0deg); }
	100% { transform: rotate(360deg); }
}

/* 深色主题适配 */
.dark-theme {
	--grid-item--bg: oklch(20% 0.02 120);
	--grid-item--color: oklch(85% 0.02 70);
}

/* 移动端适配 */
@media (max-width: 768px) {
	.content-controls {
		flex-direction: column;
		align-items: stretch;
	}
	
	.controls-left,
	.controls-right {
		justify-content: space-between;
	}
	
	.search-container {
		min-width: auto;
	}
	
	.grid--container {
		grid-template-columns: 1fr;
		gap: 20px;
	}
	
	.page-main-title {
		font-size: 2rem;
	}
} 